@Singleton
type Foo = {
    foo: int,
};

// ERROR: no template `Template` defined

impl Template on @Singleton {
    fn New(s: @Singleton) {
        s.foo = 42;
    }
}

impl @Singleton {
    fn do_something(s: @Singleton) {
        println(s);
    }
}

fn main() {
    // Automatically captures the singleton as there is only one instance.
    do_something();
}
